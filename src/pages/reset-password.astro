---
import Layout from "../layouts/Layout.astro";
import AuthLayout from "../layouts/AuthLayout.astro";
import { ResetPasswordForm } from "../components/Auth/ResetPasswordForm";

// TODO: Handle error/success messages from query params
const error = Astro.url.searchParams.get("error");
const success = Astro.url.searchParams.get("success");

// Get token from URL
const token = Astro.url.searchParams.get("token");

// If no token, redirect to forgot-password
if (!token) {
  return Astro.redirect("/forgot-password?error=Brak tokenu resetującego");
}
---

<Layout title="Nowe hasło - 10x Cards">
  <AuthLayout>
    <ResetPasswordForm client:load token={token} error={error || undefined} success={success || undefined} />
  </AuthLayout>
</Layout>
